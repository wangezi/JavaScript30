<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Scoped CSS Variables and JS</title>
  <link rel="icon" href="https://fav.farm/ğŸ¼" />
</head>

<body>
  <h2>Update CSS Variables with <span class='hl'>JS</span></h2>

  <div class="controls">
    <label for="spacing">Spacing:</label>
    <input id="spacing" type="range" name="spacing" min="10" max="200" value="10" data-sizing="px">

    <label for="blur">Blur:</label>
    <input id="blur" type="range" name="blur" min="0" max="25" value="10" data-sizing="px">

    <label for="base">Base Color</label>
    <input id="base" type="color" name="base" value="#45d368">
  </div>

  <img src="https://i.pinimg.com/736x/9a/44/f9/9a44f94f64be9dcc3344f9d25757ade6.jpg">

  <style>
    /* ç¬¬ä¸€æ­¥ :  */

    /* è¨­ç½® CSS è®Šæ•¸ start */
    :root {
      --base: #45d368;
      --spacing: 10px;
      --blur: 10px;
    }

    img {
      /* çµ¦åœ–ç‰‡åŠ ä¸Šå…§é‚Šè·ï¼Œé–“éš”çš„å¤§å°å–è‡ª --spacingï¼ˆ10pxï¼‰ã€‚ */
      padding: var(--spacing);

      /* è¨­ç½®èƒŒæ™¯é¡è‰²ï¼Œé¡è‰²å–è‡ª --baseï¼ˆ#45d368ï¼‰ã€‚ */
      background: var(--base);

      /* è¨­ç½®æ¨¡ç³Šæ•ˆæœï¼Œæ¨¡ç³Šçš„å¤§å°å–è‡ª --blurï¼ˆ10pxï¼‰ã€‚ */
      filter: blur(var(--blur));
    }

    .hl {
      /* è¨­ç½®å­—é«”é¡è‰²ï¼Œé¡è‰²å–è‡ª --baseï¼ˆ#45d368ï¼‰ã€‚ */
      color: var(--base);
    }

    /* è¨­ç½® CSS è®Šæ•¸ end */

    body {
      text-align: center;
      background: #70a8cf;
      color: white;
      font-family: 'helvetica neue', sans-serif;
      font-weight: 100;
      font-size: 50px;
    }

    .controls {
      margin-bottom: 50px;
    }

    input {
      width: 100px;
    }
  </style>

  <script>

    // ç¬¬äºŒæ­¥é©Ÿ: è¨­ç½®åå« inputs é¸å–æ‰€æœ‰ .controls å€å¡Šä¸­çš„ <input> æ¨™ç±¤ï¼Œä¸¦å›å‚³ä¸€å€‹ NodeListï¼ˆé¡ä¼¼é™£åˆ—çš„çµæ§‹ï¼‰ã€‚
    const inputs = document.querySelectorAll('.controls input')
    // console.log(inputs) 

    // ç¬¬å››æ­¥é©Ÿ å®šç¾© handleUpdate() å‡½æ•¸

    function handleUpdate() {
      // console.log(this.value)

      // this ä»£è¡¨è§¸ç™¼äº‹ä»¶çš„ <input> å…ƒç´ ã€‚
      // this.dataset.sizing å–å¾— <input> ä¸Šçš„ data-sizing å±¬æ€§å€¼ã€‚
      // è‹¥å­˜åœ¨ data-sizing="px"ï¼Œsuffix å°±æœƒæ˜¯ "px"ï¼›
      // è‹¥æ²’æœ‰ï¼ˆå¦‚é¡è‰²é¸æ“‡å™¨ï¼‰ï¼Œå‰‡é è¨­ç‚ºç©ºå­—ä¸² ('')ã€‚
      const suffix = this.dataset.sizing || '';

      // document.documentElement.style.setProperty() æ˜¯ä¸€å€‹ JavaScript æ–¹æ³•ï¼Œå°ˆé–€ç”¨ä¾†å‹•æ…‹ä¿®æ”¹ CSS è®Šæ•¸ (CSS Custom Properties) çš„å€¼ã€‚
      // é€™å€‹æ–¹æ³•éå¸¸å¯¦ç”¨ï¼Œå°¤å…¶åœ¨éœ€è¦æ ¹æ“šä½¿ç”¨è€…æ“ä½œå³æ™‚è®Šæ›´æ¨£å¼æ™‚ã€‚
      // this.name å–å¾— <input> çš„ name å±¬æ€§å€¼ï¼Œä¾‹å¦‚ spacingã€blurã€baseã€‚
      // this.value æ˜¯ä½¿ç”¨è€…ç•¶å‰é¸æ“‡çš„å€¼ã€‚
      // suffix å°±æœƒæ˜¯ "px"ï¼›
      document.documentElement.style.setProperty(`--${this.name}`, this.value + suffix);

      // console.log(this.dataset)

    }

    // ç¬¬ä¸‰æ­¥é©Ÿ ç‚ºæ¯å€‹ <input> ç¶å®šäº‹ä»¶

    // change äº‹ä»¶ â” ç•¶æ»‘æ¡¿é‡‹æ”¾æ™‚è§¸ç™¼ï¼ˆé©åˆæ•¸å€¼ã€é¡è‰²é¸æ“‡å™¨ï¼‰ã€‚
    inputs.forEach(input => input.addEventListener('change', handleUpdate));

    // mousemove äº‹ä»¶ â” æ»‘å‹•æ»‘æ¡¿æ™‚ç«‹å³è§¸ç™¼ï¼ˆç¢ºä¿è®ŠåŒ–å³æ™‚å¯è¦‹ï¼‰ã€‚
    inputs.forEach(input => input.addEventListener('mousemove', handleUpdate));

  </script>

</body>

</html>